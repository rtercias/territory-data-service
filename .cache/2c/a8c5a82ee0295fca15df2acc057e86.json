{"id":"eMEv","dependencies":[{"name":"/Users/ryan.tercias/MyApps/territory-data-service/package.json","includedInParent":true,"mtime":1592367476738},{"name":"./schema/schema","loc":{"line":19,"column":36},"parent":"/Users/ryan.tercias/MyApps/territory-data-service/src/server.js","resolved":"/Users/ryan.tercias/MyApps/territory-data-service/src/schema/schema.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.gqlServer=u,exports.conn=void 0;var e=n(require(\"express\")),r=n(require(\"mysql\")),s=require(\"apollo-server-express\"),o=require(\"util\"),t=require(\"./schema/schema\");function n(e){return e&&e.__esModule?e:{default:e}}const p=r.default.createPool({connectionLimit:10,ssl:{rejectUnauthorized:!1},host:process.env.TERRITORY_SERVER,user:process.env.TERRITORY_USERID,password:process.env.TERRITORY_PASSWORD,database:\"territory\"});function u(){const r=(0,e.default)(),n=new s.ApolloServer({typeDefs:t.typeDefs,resolvers:t.resolvers,introspection:!0,playground:!0});return p.query=(0,o.promisify)(p.query),n.applyMiddleware({app:r,path:\"/\",cors:!0}),r}exports.conn=p;"},"sourceMaps":{"js":{"mappings":[{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":0}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":13}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":20}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":35}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":43}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":56}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":57}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":64}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":68}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":76}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":86}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":88}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":96}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":106}},{"source":"server.js","original":{"line":15,"column":0},"generated":{"line":1,"column":108}},{"source":"server.js","original":{"line":15,"column":0},"generated":{"line":1,"column":112}},{"source":"server.js","original":{"line":15,"column":0},"generated":{"line":1,"column":114}},{"source":"server.js","original":{"line":15,"column":0},"generated":{"line":1,"column":116}},{"source":"server.js","original":{"line":15,"column":0},"generated":{"line":1,"column":124}},{"source":"server.js","original":{"line":16,"column":0},"generated":{"line":1,"column":136}},{"source":"server.js","original":{"line":16,"column":0},"generated":{"line":1,"column":138}},{"source":"server.js","original":{"line":16,"column":0},"generated":{"line":1,"column":140}},{"source":"server.js","original":{"line":16,"column":0},"generated":{"line":1,"column":148}},{"source":"server.js","original":{"line":17,"column":0},"generated":{"line":1,"column":158}},{"source":"server.js","original":{"line":17,"column":0},"generated":{"line":1,"column":160}},{"source":"server.js","original":{"line":17,"column":0},"generated":{"line":1,"column":168}},{"source":"server.js","original":{"line":18,"column":0},"generated":{"line":1,"column":193}},{"source":"server.js","original":{"line":18,"column":0},"generated":{"line":1,"column":195}},{"source":"server.js","original":{"line":18,"column":0},"generated":{"line":1,"column":203}},{"source":"server.js","original":{"line":19,"column":0},"generated":{"line":1,"column":211}},{"source":"server.js","original":{"line":19,"column":0},"generated":{"line":1,"column":213}},{"source":"server.js","original":{"line":19,"column":0},"generated":{"line":1,"column":221}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":240}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":249}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":251}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":254}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":261}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":264}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":266}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":277}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":279}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":280}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":288}},{"source":"server.js","original":{"line":21,"column":7},"generated":{"line":1,"column":291}},{"source":"server.js","name":"conn","original":{"line":21,"column":13},"generated":{"line":1,"column":297}},{"source":"server.js","name":"mysql","original":{"line":21,"column":20},"generated":{"line":1,"column":299}},{"source":"server.js","name":"createPool","original":{"line":21,"column":26},"generated":{"line":1,"column":301}},{"source":"server.js","name":"createPool","original":{"line":21,"column":26},"generated":{"line":1,"column":309}},{"source":"server.js","original":{"line":21,"column":37},"generated":{"line":1,"column":320}},{"source":"server.js","name":"connectionLimit","original":{"line":22,"column":2},"generated":{"line":1,"column":321}},{"source":"server.js","original":{"line":22,"column":19},"generated":{"line":1,"column":337}},{"source":"server.js","name":"ssl","original":{"line":23,"column":2},"generated":{"line":1,"column":340}},{"source":"server.js","original":{"line":23,"column":7},"generated":{"line":1,"column":344}},{"source":"server.js","name":"rejectUnauthorized","original":{"line":23,"column":9},"generated":{"line":1,"column":345}},{"source":"server.js","original":{"line":23,"column":29},"generated":{"line":1,"column":365}},{"source":"server.js","name":"host","original":{"line":24,"column":2},"generated":{"line":1,"column":368}},{"source":"server.js","name":"process","original":{"line":24,"column":8},"generated":{"line":1,"column":373}},{"source":"server.js","name":"env","original":{"line":24,"column":16},"generated":{"line":1,"column":381}},{"source":"server.js","name":"TERRITORY_SERVER","original":{"line":24,"column":20},"generated":{"line":1,"column":385}},{"source":"server.js","name":"user","original":{"line":25,"column":2},"generated":{"line":1,"column":402}},{"source":"server.js","name":"process","original":{"line":25,"column":8},"generated":{"line":1,"column":407}},{"source":"server.js","name":"env","original":{"line":25,"column":16},"generated":{"line":1,"column":415}},{"source":"server.js","name":"TERRITORY_USERID","original":{"line":25,"column":20},"generated":{"line":1,"column":419}},{"source":"server.js","name":"password","original":{"line":26,"column":2},"generated":{"line":1,"column":436}},{"source":"server.js","name":"process","original":{"line":26,"column":12},"generated":{"line":1,"column":445}},{"source":"server.js","name":"env","original":{"line":26,"column":20},"generated":{"line":1,"column":453}},{"source":"server.js","name":"TERRITORY_PASSWORD","original":{"line":26,"column":24},"generated":{"line":1,"column":457}},{"source":"server.js","name":"database","original":{"line":27,"column":2},"generated":{"line":1,"column":476}},{"source":"server.js","original":{"line":27,"column":12},"generated":{"line":1,"column":485}},{"source":"server.js","original":{"line":30,"column":7},"generated":{"line":1,"column":499}},{"source":"server.js","name":"gqlServer","original":{"line":30,"column":16},"generated":{"line":1,"column":508}},{"source":"server.js","name":"app","original":{"line":31,"column":8},"generated":{"line":1,"column":512}},{"source":"server.js","name":"app","original":{"line":31,"column":8},"generated":{"line":1,"column":518}},{"source":"server.js","original":{"line":31,"column":14},"generated":{"line":1,"column":521}},{"source":"server.js","original":{"line":31,"column":2},"generated":{"line":1,"column":523}},{"source":"server.js","original":{"line":31,"column":2},"generated":{"line":1,"column":525}},{"source":"server.js","name":"apolloServer","original":{"line":32,"column":8},"generated":{"line":1,"column":536}},{"source":"server.js","original":{"line":32,"column":23},"generated":{"line":1,"column":538}},{"source":"server.js","name":"ApolloServer","original":{"line":32,"column":27},"generated":{"line":1,"column":542}},{"source":"server.js","original":{"line":32,"column":23},"generated":{"line":1,"column":544}},{"source":"server.js","original":{"line":32,"column":40},"generated":{"line":1,"column":557}},{"source":"server.js","name":"typeDefs","original":{"line":33,"column":4},"generated":{"line":1,"column":558}},{"source":"server.js","name":"typeDefs","original":{"line":33,"column":4},"generated":{"line":1,"column":567}},{"source":"server.js","original":{"line":32,"column":40},"generated":{"line":1,"column":569}},{"source":"server.js","name":"resolvers","original":{"line":34,"column":4},"generated":{"line":1,"column":578}},{"source":"server.js","name":"resolvers","original":{"line":34,"column":4},"generated":{"line":1,"column":588}},{"source":"server.js","original":{"line":32,"column":40},"generated":{"line":1,"column":590}},{"source":"server.js","name":"introspection","original":{"line":35,"column":4},"generated":{"line":1,"column":600}},{"source":"server.js","original":{"line":35,"column":19},"generated":{"line":1,"column":615}},{"source":"server.js","name":"playground","original":{"line":36,"column":4},"generated":{"line":1,"column":617}},{"source":"server.js","original":{"line":36,"column":16},"generated":{"line":1,"column":629}},{"source":"server.js","name":"app","original":{"line":41,"column":9},"generated":{"line":1,"column":633}},{"source":"server.js","name":"conn","original":{"line":39,"column":2},"generated":{"line":1,"column":640}},{"source":"server.js","name":"query","original":{"line":39,"column":7},"generated":{"line":1,"column":642}},{"source":"server.js","original":{"line":39,"column":15},"generated":{"line":1,"column":649}},{"source":"server.js","name":"conn","original":{"line":39,"column":25},"generated":{"line":1,"column":651}},{"source":"server.js","name":"conn","original":{"line":39,"column":25},"generated":{"line":1,"column":653}},{"source":"server.js","name":"conn","original":{"line":39,"column":25},"generated":{"line":1,"column":664}},{"source":"server.js","name":"query","original":{"line":39,"column":30},"generated":{"line":1,"column":666}},{"source":"server.js","name":"apolloServer","original":{"line":40,"column":2},"generated":{"line":1,"column":673}},{"source":"server.js","name":"applyMiddleware","original":{"line":40,"column":15},"generated":{"line":1,"column":675}},{"source":"server.js","original":{"line":40,"column":31},"generated":{"line":1,"column":691}},{"source":"server.js","name":"app","original":{"line":40,"column":33},"generated":{"line":1,"column":692}},{"source":"server.js","name":"app","original":{"line":40,"column":33},"generated":{"line":1,"column":696}},{"source":"server.js","name":"path","original":{"line":40,"column":38},"generated":{"line":1,"column":698}},{"source":"server.js","original":{"line":40,"column":44},"generated":{"line":1,"column":703}},{"source":"server.js","name":"cors","original":{"line":40,"column":49},"generated":{"line":1,"column":707}},{"source":"server.js","original":{"line":40,"column":55},"generated":{"line":1,"column":713}},{"source":"server.js","name":"app","original":{"line":41,"column":9},"generated":{"line":1,"column":717}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":719}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":727}},{"source":"server.js","original":{"line":42,"column":1},"generated":{"line":1,"column":732}}],"sources":{"server.js":"/**\n * Copyright 2018 Territory Data Service\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), \n * to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, \n * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES \n * OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE \n * OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport express from 'express';\nimport mysql from 'mysql';\nimport { ApolloServer } from 'apollo-server-express';\nimport { promisify } from 'util';\nimport { resolvers, typeDefs } from './schema/schema';\n\nexport const conn = mysql.createPool({\n  connectionLimit: 10,\n  ssl: { rejectUnauthorized: false }, // TODO: add SSL certificate file here (see https://github.com/mysqljs/mysql#ssl-options)\n  host: process.env.TERRITORY_SERVER,\n  user: process.env.TERRITORY_USERID,\n  password: process.env.TERRITORY_PASSWORD,\n  database: 'territory'\n});\n\nexport function gqlServer() {\n  const app = express();\n  const apolloServer = new ApolloServer({\n    typeDefs,\n    resolvers,\n    introspection: true,\n    playground: true,\n  });\n\n  conn.query = promisify(conn.query);\n  apolloServer.applyMiddleware({ app, path: '/', cors: true });\n  return app;\n}\n"},"lineCount":null}},"error":null,"hash":"de0ec98bf3b4c1a8b5194daa649cfe71","cacheData":{"env":{}}}