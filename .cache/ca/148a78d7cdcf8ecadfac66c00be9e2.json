{"id":"wspW","dependencies":[{"name":"/Users/ryan.tercias/MyApps/territory-data-service/package.json","includedInParent":true,"mtime":1592367476738},{"name":"../server","loc":{"line":2,"column":21},"parent":"/Users/ryan.tercias/MyApps/territory-data-service/src/async/publishers.js","resolved":"/Users/ryan.tercias/MyApps/territory-data-service/src/server.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=require(\"lodash\"),r=require(\"../server\");class s{async getPublisherById(e){return(await r.conn.query(`SELECT id, firstname, lastname, congregationid, username, status FROM publishers WHERE id=${e}`))[0]}async getUser(e){return(await r.conn.query(`SELECT * FROM users WHERE username='${e}'`))[0]}async getPublisherByName(e,s){return(await r.conn.query(`SELECT id, firstname, lastname, congregationid, username, status FROM publishers\\n      WHERE firstname='${e}' AND lastname='${s}'`))[0]}async getPublisherById(e){return(await r.conn.query(`SELECT id, firstname, lastname, congregationid, username, status FROM publishers\\n      WHERE id=${e}`))[0]}async searchPublishers(s,a){const n=a||\"\",t=`SELECT id, firstname, lastname, congregationid, username, status FROM publishers\\n      WHERE congregationid = ${s} AND (firstname LIKE '%${n}%' OR lastname LIKE '%${n}%')`;return(0,e.toArray)(await r.conn.query(t))}}var a=new s;exports.default=a;"},"sourceMaps":{"js":{"mappings":[{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":0}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":13}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":20}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":35}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":43}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":56}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":57}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":64}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":68}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":76}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":89}},{"source":"async/publishers.js","original":{"line":1,"column":0},"generated":{"line":1,"column":91}},{"source":"async/publishers.js","original":{"line":1,"column":0},"generated":{"line":1,"column":95}},{"source":"async/publishers.js","original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"async/publishers.js","original":{"line":1,"column":0},"generated":{"line":1,"column":105}},{"source":"async/publishers.js","original":{"line":2,"column":0},"generated":{"line":1,"column":115}},{"source":"async/publishers.js","original":{"line":2,"column":0},"generated":{"line":1,"column":117}},{"source":"async/publishers.js","original":{"line":2,"column":0},"generated":{"line":1,"column":125}},{"source":"async/publishers.js","original":{"line":4,"column":0},"generated":{"line":1,"column":138}},{"source":"async/publishers.js","name":"PublisherAsync","original":{"line":4,"column":6},"generated":{"line":1,"column":144}},{"source":"async/publishers.js","name":"getPublisherById","original":{"line":5,"column":8},"generated":{"line":1,"column":146}},{"source":"async/publishers.js","name":"id","original":{"line":5,"column":26},"generated":{"line":1,"column":169}},{"source":"async/publishers.js","original":{"line":6,"column":11},"generated":{"line":1,"column":172}},{"source":"async/publishers.js","name":"conn","original":{"line":6,"column":18},"generated":{"line":1,"column":185}},{"source":"async/publishers.js","name":"query","original":{"line":6,"column":23},"generated":{"line":1,"column":187}},{"source":"async/publishers.js","name":"query","original":{"line":6,"column":23},"generated":{"line":1,"column":192}},{"source":"async/publishers.js","name":"id","original":{"line":6,"column":122},"generated":{"line":1,"column":291}},{"source":"async/publishers.js","original":{"line":6,"column":129},"generated":{"line":1,"column":297}},{"source":"async/publishers.js","name":"getUser","original":{"line":9,"column":8},"generated":{"line":1,"column":300}},{"source":"async/publishers.js","name":"username","original":{"line":9,"column":17},"generated":{"line":1,"column":314}},{"source":"async/publishers.js","original":{"line":10,"column":11},"generated":{"line":1,"column":317}},{"source":"async/publishers.js","name":"conn","original":{"line":10,"column":18},"generated":{"line":1,"column":330}},{"source":"async/publishers.js","name":"query","original":{"line":10,"column":23},"generated":{"line":1,"column":332}},{"source":"async/publishers.js","name":"query","original":{"line":10,"column":23},"generated":{"line":1,"column":337}},{"source":"async/publishers.js","name":"username","original":{"line":10,"column":68},"generated":{"line":1,"column":382}},{"source":"async/publishers.js","original":{"line":10,"column":82},"generated":{"line":1,"column":389}},{"source":"async/publishers.js","name":"getPublisherByName","original":{"line":13,"column":8},"generated":{"line":1,"column":392}},{"source":"async/publishers.js","name":"firstName","original":{"line":13,"column":28},"generated":{"line":1,"column":417}},{"source":"async/publishers.js","name":"lastName","original":{"line":13,"column":39},"generated":{"line":1,"column":419}},{"source":"async/publishers.js","original":{"line":14,"column":11},"generated":{"line":1,"column":422}},{"source":"async/publishers.js","name":"conn","original":{"line":14,"column":18},"generated":{"line":1,"column":435}},{"source":"async/publishers.js","name":"query","original":{"line":14,"column":23},"generated":{"line":1,"column":437}},{"source":"async/publishers.js","name":"query","original":{"line":14,"column":23},"generated":{"line":1,"column":442}},{"source":"async/publishers.js","name":"firstName","original":{"line":15,"column":25},"generated":{"line":1,"column":556}},{"source":"async/publishers.js","name":"lastName","original":{"line":15,"column":53},"generated":{"line":1,"column":576}},{"source":"async/publishers.js","original":{"line":15,"column":67},"generated":{"line":1,"column":583}},{"source":"async/publishers.js","name":"getPublisherById","original":{"line":18,"column":8},"generated":{"line":1,"column":586}},{"source":"async/publishers.js","name":"publisherId","original":{"line":18,"column":26},"generated":{"line":1,"column":609}},{"source":"async/publishers.js","original":{"line":19,"column":11},"generated":{"line":1,"column":612}},{"source":"async/publishers.js","name":"conn","original":{"line":19,"column":18},"generated":{"line":1,"column":625}},{"source":"async/publishers.js","name":"query","original":{"line":19,"column":23},"generated":{"line":1,"column":627}},{"source":"async/publishers.js","name":"query","original":{"line":19,"column":23},"generated":{"line":1,"column":632}},{"source":"async/publishers.js","name":"publisherId","original":{"line":20,"column":17},"generated":{"line":1,"column":738}},{"source":"async/publishers.js","original":{"line":20,"column":33},"generated":{"line":1,"column":744}},{"source":"async/publishers.js","name":"searchPublishers","original":{"line":23,"column":8},"generated":{"line":1,"column":747}},{"source":"async/publishers.js","name":"congId","original":{"line":23,"column":26},"generated":{"line":1,"column":770}},{"source":"async/publishers.js","name":"keyword","original":{"line":23,"column":34},"generated":{"line":1,"column":772}},{"source":"async/publishers.js","name":"kw","original":{"line":24,"column":10},"generated":{"line":1,"column":775}},{"source":"async/publishers.js","name":"kw","original":{"line":24,"column":10},"generated":{"line":1,"column":781}},{"source":"async/publishers.js","name":"keyword","original":{"line":24,"column":15},"generated":{"line":1,"column":783}},{"source":"async/publishers.js","original":{"line":24,"column":26},"generated":{"line":1,"column":786}},{"source":"async/publishers.js","name":"sql","original":{"line":25,"column":10},"generated":{"line":1,"column":789}},{"source":"async/publishers.js","name":"congId","original":{"line":26,"column":31},"generated":{"line":1,"column":905}},{"source":"async/publishers.js","name":"kw","original":{"line":26,"column":63},"generated":{"line":1,"column":932}},{"source":"async/publishers.js","name":"kw","original":{"line":26,"column":90},"generated":{"line":1,"column":958}},{"source":"async/publishers.js","original":{"line":27,"column":11},"generated":{"line":1,"column":965}},{"source":"async/publishers.js","original":{"line":27,"column":11},"generated":{"line":1,"column":972}},{"source":"async/publishers.js","original":{"line":27,"column":19},"generated":{"line":1,"column":974}},{"source":"async/publishers.js","original":{"line":27,"column":19},"generated":{"line":1,"column":976}},{"source":"async/publishers.js","name":"conn","original":{"line":27,"column":25},"generated":{"line":1,"column":991}},{"source":"async/publishers.js","name":"query","original":{"line":27,"column":30},"generated":{"line":1,"column":993}},{"source":"async/publishers.js","name":"query","original":{"line":27,"column":30},"generated":{"line":1,"column":998}},{"source":"async/publishers.js","name":"sql","original":{"line":27,"column":36},"generated":{"line":1,"column":1004}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":1009}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":1013}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":1015}},{"source":"async/publishers.js","name":"PublisherAsync","original":{"line":31,"column":19},"generated":{"line":1,"column":1019}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":1021}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":1029}},{"source":"async/publishers.js","original":{"line":31,"column":15},"generated":{"line":1,"column":1037}}],"sources":{"async/publishers.js":"import { toArray } from 'lodash';\nimport { conn } from '../server';\n\nclass PublisherAsync {\n  async getPublisherById (id) {\n    return (await conn.query(`SELECT id, firstname, lastname, congregationid, username, status FROM publishers WHERE id=${id}`))[0];\n  }\n\n  async getUser (username) {\n    return (await conn.query(`SELECT * FROM users WHERE username='${username}'`))[0];\n  }\n\n  async getPublisherByName (firstName, lastName) {\n    return (await conn.query(`SELECT id, firstname, lastname, congregationid, username, status FROM publishers\n      WHERE firstname='${firstName}' AND lastname='${lastName}'`))[0];\n  }\n\n  async getPublisherById (publisherId) {\n    return (await conn.query(`SELECT id, firstname, lastname, congregationid, username, status FROM publishers\n      WHERE id=${publisherId}`))[0];\n  }\n\n  async searchPublishers (congId, keyword) {\n    const kw = keyword || '';\n    const sql = `SELECT id, firstname, lastname, congregationid, username, status FROM publishers\n      WHERE congregationid = ${congId} AND (firstname LIKE '%${kw}%' OR lastname LIKE '%${kw}%')`;\n    return toArray(await conn.query(sql));\n  }\n}\n\nexport default new PublisherAsync();\n"},"lineCount":null}},"error":null,"hash":"f31fe7624e4ee101c30209959736ca0b","cacheData":{"env":{}}}